<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

		
  <meta http-equiv="content-type" content="text/html;charset=utf-8" />

		
  <meta name="generator" content="Adobe GoLive" />

		
		
  <title>help_main</title>
  <link href="../Help/web-content/css/basic.css" rel="stylesheet" type="text/css" media="all" />

		
  <style type="text/css" media="screen"><!--
.section_header { }
--></style>
</head>




	<body>

		
<h3><big style="color: rgb(153, 0, 0);"><big><big><small><small>MCAVIEW HELP PAGE</small></small></big></big></big></h3>

		
<h2><font size="4"><a href="mailto:aw30@cornell.edu">Arthur Woll</a> -- 31 March 2006</font><big style="color: rgb(153, 0, 0);"><big><big><small><small><br />

							</small></small></big></big></big></h2>

		
<h3><big style="color: rgb(153, 0, 0);"><big><big><small><small>Contents</small></small></big></big></big></h3>

		
<ol>

			<li><a title="Mcaview Dist page" href="http://staff.chess.cornell.edu/%7ewoll/Dist/Software/Mcaview/Docs/mcaview_inst.html">Installation</a></li>

			<li><a href="#overview">Overview</a></li>

			<li><a href="#quickstart">Quick guide</a></li>

			<li><a href="#layout">Layout</a></li>

			<li><a href="#menus">Menus</a></li>

			<li><a href="#file_types">File Types</a></li>

			<li><a href="#profile_options">Profile Plot Options</a></li>

			<li><a href="#ecal_brief">Energy Calibration</a></li>

		
</ol>

		
<p><a id="overview" name="overview"></a><big style="color: rgb(153, 0, 0);"><big><big><small><small><span class="section_header">OVERVIEW:</span> <span style="color: rgb(0, 0, 0);"><font size="3"><a href="../Pictures/grab1_eprof.jpg">mcaview</a> is a graphical user interface for examining confocal x-ray fluorescence microscopy data at <a href="http://www.chess.cornell.edu">CHESS</a>.
These data consist of one or more spectrum, i.e. a histogram
representing photon counts as a function of energy.&nbsp; It is
particularly geared towards two- and three-dimensional data sets, and
is designed to allow the most common qualitative analysis tasks (depth
profiles, virtual cross-sections) to be performed quickly and
simply.&nbsp;</font></span></small></small></big></big></big><big style="color: rgb(153, 0, 0);"><big><big><small><small><span style="color: rgb(0, 0, 0);"><font size="3">Mcaview
is designed to load data taken in conjunction with SPEC, the principal
control &amp; data acquisition software at CHESS. </font></span></small></small></big></big></big></p>

		
<p><big style="color: rgb(153, 0, 0);"><big><big><small><small><br />

								<a id="quickstart" name="quickstart"></a>QUICK GUIDE:<span style="color: rgb(0, 0, 0);"> </span></small></small></big></big></big></p>

		
<ol>

			<li><span style="color: rgb(0, 0, 0);">Use File-&gt; Open
(autodetect) to select an MCA data file generated by a scan in SPEC, or
a spec data file that contains a scan that includes MCA data.</span></li>

			<li><big style="color: rgb(153, 0, 0);"><span style="color: rgb(0, 0, 0);"><font size="3">Once
loaded, some or all of the data is shown in the middle panel of
mcaview. &nbsp;If the scan was a single point or 1D scan, all spectra
are shown. &nbsp;For mesh scans, only spectra from the first row in the
mesh are shown. &nbsp;You can browse to other rows using the slider at
the right.</font></span></big></li>

			<li><span style="color: rgb(0, 0, 0);">Next, you can use the mouse
to select ROIs on this image. &nbsp;Depending on the selection in
'Profile Plot Select', this ROI is used to generate I vs. motor, I vs.
Energy, or 2D intensity plots in bottom panel. &nbsp;Tooltips for the
buttons in the lower panel describe their effect on the profiles.</span></li>

		
</ol>

		<a id="layout" name="layout"></a><big style="color: rgb(153, 0, 0);"><big><big><small><small><span class="section_header">LAYOUT:</span></small></small></big></big></big>
		
<p><font color="#990000">Mcaview is divided into three sections: Most
buttons and input boxes have tooltip strings that can be accessed by
hovering the mouse over the button or box.</font></p>

		
<p><strong>1.  The top section displays information about the current data file and scan, e.g. the filename and scan number.</strong>
New scans can be loaded by editing the filename (in the case of
separate mca data files), the scan number, or by clicking the left
&amp; right arrow buttons to advance to the next or previous scan. The
current scan is displayed, along with the number of spectra loaded, the
<a href="#ecal_brief">current energy calibration</a>, the number of completed spectra, and the positions of two user-selectable motors.</p>

		
<p align="center"><img src="../Pictures/scan_panel.jpg" alt="" border="0" height="99" width="677" /></p>

		
<p><strong>2. The middle section consists of the ROI manager (left) and raw data pane (right). </strong>
The data are displayed as an image, with channel number, or energy,
along the x-axis, and the first scanning-motor position along the y
axis (in this case, "scany"). Color indicates the log of the intensity,
with red coresponding to the maximum. For multiple-motor scans, (such
as the one shown above), a slider-bar appears to the right of this pane
to navigate to different scanz positions. </p>

		
<p>Dragging a rectangular area, (Region Of Interest) on the image pane
at the right causes mcaview to generate a projected view of the data
within the ROI. The type of projection (Intensity vs. Energy, vs. the
fast-scaning motor, or a 2D map), depends on the 'Profile Type' setting
at the left. </p>

		
<p align="center"><img src="../Pictures/mca_panel.jpg" alt="" border="0" height="339" width="664" /></p>

		
<p><strong>3. The lower section displays one or more projections (profiles) from ROIs generated using the middle-two panels.</strong>  Display options are shown in the lower-left panel.  </p>

		
<p></p>

		
<p align="center"><img src="../Pictures/profile_panel.jpg" alt="" border="0" height="246" width="660" /></p>

		
<p><a id="menus" name="menus"></a><big style="color: rgb(153, 0, 0);"><big><big><small><small><span class="section_header">MENUS: </span></small></small></big></big></big></p>

		
<p><font color="#990000">File menu:</font> </p>

		
<ul>

			<li>The <strong>Open (autodetect) </strong>item opens a dialog box allowing the user to browse to the data file they wish to open.  </li>

			<li> <strong>Open (autodetect) </strong> acts just like <strong>Open prior type</strong> except that mcaview assumes that the same file format and detector settings apply (see below).  </li>

			<li><strong>Save scan to *.mat</strong> format saves not only the original data (in binary format), but also, all the information about the currently-stored ROIs.  </li>

			<li><strong>Load Calibration</strong> allows the user to to load a previously defined energy calibration file (from the energy calibration dialog).  </li>

			<li><strong>Dead Time Settings</strong> brings up the file type/detector settings dialog box that is encountered when opening a data file using <strong>Open (autodetect)</strong>.  It allows dead-time options to be edited.  The changes are kept when the scan is saved to *.mat format.</li>

		
</ul>

		
<p align="center"><img src="../Pictures/grab4_filemenu.jpg" alt="" border="0" height="272" width="422" /></p>

		
<p><font color="#990000">Export menu:</font></p>

		
<ul>

			<li><font color="black">The first three items in this menu are only
available if mcaview is running from within an existing matlab session.
In this case, the relevant variables are exported to the matlab base
workspace for perusal in the matlab environment. </font>The variable
'scandata' is a structure containing all of the MCA and SPEC data&nbsp;
for a particular scan.&nbsp; For example, scandata.mcadata holds all of
the MCA data, reshaped to match the scan dimensions.&nbsp; Exporting
'Current ROI' exports only one sub-structure of scandata, namely that
containing the current ROI. </li>

			<li><font color="black">The final option exports the data from the
current 2D image to a space-delineated text file that may be imported
into another program, such as excel. </font></li>

		
</ul>

		
<p align="center"><img src="../Pictures/grab5_exportmenu.jpg" alt="" border="0" height="169" width="293" /></p>

		
<p align="left"><font color="#990000">Options menu:</font></p>

		
<p align="center"><img src="../Pictures/grab6_optionsmenu.jpg" alt="" border="0" height="184" width="395" /></p>

		
<ul>

			<li><strong>Auto-Update profiles</strong>: This toggle button
controls whether the projections of ROIS displayed in the bottom panel
are autmatically re-calculated whenever settings in the ROI manager are
changed. If unchecked, then the user must click the 'Update' button at
the lower-end of the ROI panel to activate changes.</li>

			<li><strong>Show BkSub Fits</strong>: If checked, then an auxiliary
window is created whenever background subtraction is on. If Bksub is
'gauss', then the window dislays the best-fit gaussian curve to each
energy profile in the projection. If bksub is 'linear' or 'quad', then
the auxiliary windows shows the line or 2nd-order curve that was
subtracted from the data before calculating the projection</li>

		
</ul>

		
<p><a id="file_types" name="file_types"></a><font color="#990000" size="4">FILE TYPES:</font><font size="4"> </font>Whenever
a raw data file is opened, the MCA data and SPEC data (counters, motor
positions, etc.) are loaded into a single data structure (scandata). By
default, this variable is saved to a binary file (extension .mat) with
the same base filename as the MCA file. Subsequently, this file can be
loaded instead of the raw file, which is much faster.&nbsp; If a&nbsp;
raw data file is loaded more than once, the user is prompted whether or
not to overwrite the existing binary file.&nbsp; Among the parameters
saved in the binary file are the energy calibration parameters.&nbsp;
If you change these parameters and want these changes reflected in the
binary file, use File-&gt;Save scan to *.mat.&nbsp;</p>

		
<p><a id="profile_options" name="profile_options"></a><span class="section_header"><font color="#990000">PROFILE PLOT OPTIONS:</font></span>
If 'Display' is toggled from 'Current' to 'All', then multiple (linear)
profiles are displayed simultaneously. (This has no effect for 2D
images). The intensity scale may be toggled from linear to logarithmic.
If 'Normalize to Max' is 'on', then all displayed profiles will be
normalized to their maximum value. This is useful when the user wants
to compare elements or peaks that have very different intensities. 2D
smoothing 'on' turns on interpolation for 2D images. 'Motor position'
may be set to 'abs' or 'rel', and is especially useful when the
fast-scan range can change during a scan. </p>

		
<p><a id="ecal_brief" name="ecal_brief"></a><font color="#990000" size="4"><span class="section_header">ENERGY CALIBRATION:</span></font><font size="4"> </font>Generating
a new energy calibration isn't easy at the moment. &nbsp;But, if you
know the values for the offset and slope for your data, you can enter
them in the upper panel. &nbsp;These will be applied to all the
following data loaded in the session. &nbsp;Here are rough energy
calibrations for some of the most common recent configurations (as of
March 2006):</p>

		
<table style="border-collapse: collapse;" border="1" bordercolor="#111111" cellpadding="0" cellspacing="0" width="695">

			<tbody>

				<tr>

					<td align="center" width="244"><b>Detector</b></td>

					<td align="center" width="155"><b>Offset (keV)</b></td>

					<td align="center" width="286"><b>Slope (keV /channel)</b></td>

				</tr>

				<tr>

					<td align="center" width="244">xflash (CHESS common)</td>

					<td style="text-align: center;" width="155">-0.5</td>

					<td style="text-align: center;" width="286">0.02</td>

				</tr>

				<tr>

					<td align="center" width="244">vortex (1 microsecond shaping time)</td>

					<td align="center" width="155">0</td>

					<td align="center" width="286">0.01</td>

				</tr>

				<tr>

					<td align="center" width="244">vortex (2 microsecond shaping time)</td>

					<td align="center" width="155">0</td>

					<td align="center" width="286">0.0091</td>

				</tr>

			
  </tbody>
		
</table>

		
<p></p>

		
<p><a id="anchor" name="anchor"></a><font color="#990000" size="4">EXPORT VARIABLES:</font><font size="4"> </font>When
mcaview is run from within matlab, you have the option of sending
certain of mcaview's internal variables to the main matlab workspace
for scrutiny. As mentioned above, the variable 'scandata' is a
structure containing all of the MCA and SPEC data&nbsp; for a
particular scan.&nbsp; For example, scandata.mcadata holds all of the
MCA data, reshaped to match the scan dimensions.&nbsp; 'profiles'
contains the profile or profiles plotted in the lower panel of
mcaview.&nbsp;<br />

		</p>

		
<p><a id="anchor" name="anchor"></a><font color="#990000">DATA FORMATS:</font>
mcaview, by design, requires&nbsp;information (e.g. scan dimensions)
about the SPEC scan that generated the MCA data.&nbsp; There are
variety of ways that the MCA and SPEC data files are related. In
addition, mcaview must know things like the number of MCA&nbsp;
channels stored, and the appropriate dead-time correction
method.&nbsp;&nbsp;<br />

		</p>

	
</body>
</html>
